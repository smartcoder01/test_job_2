# Тестовое задание #2

### Создание команды Artisan для добавления данных из CSV файла в базу данных

#### Описание задачи:
Необходимо разработать команду для фреймворка Laravel с использованием Artisan, которая будет считывать данные из CSV файла, выполнять их валидацию и добавлять в базу данных.

#### Требования:
1. Создать команду `makeMove`, которая будет доступна через Artisan.
2. При запуске команды, пользователь должен иметь возможность указать путь к CSV файлу.
3. При отсутствии указанного файла, необходимо выдать сообщение об ошибке.
4. Пользователь должен иметь возможность выбрать разделитель для CSV файла из предопределенного списка (`,` `,`; `:`).
5. Данные из CSV файла должны быть считаны и обработаны.
6. Для каждой записи из CSV файла необходимо выполнить следующие действия:
   - Проверить валидность данных:
     - Имя и фамилия: строковые значения, обязательные, максимальная длина 255 символов.
     - Email: корректный email-адрес, обязательный, максимальная длина 255 символов, уникальный в базе данных.
     - Дата рождения: обязательная, должна быть валидной датой.
     - Местоположение: строковое значение, обязательное, минимальная длина 1 символа, максимальная длина 255 символов.
     - Код страны: строковое значение, обязательное, максимальная длина 3 символа.
   - Если данные не прошли валидацию, записать ошибки валидации.
   - Если ошибки связаны только с местоположением, установить местоположение как "Unknown" и добавить запись в базу данных.
   - Если все данные валидны, добавить запись в базу данных.
7. После обработки всех записей, вывести сообщение о количестве успешно добавленных записей и сообщение о количестве записей с ошибками.
8. Если есть записи с ошибками, создать файл Excel с отчетом об ошибках и указать путь к файлу в сообщении для пользователя.

#### Дополнительные задания (необязательные):
1. Реализовать возможность указания файла с кодами стран в формате JSON для привязки местоположения к коду страны.
2. Обработать случай, когда возраст указан вместо даты рождения и конвертировать его в дату.

#### Примеры данных CSV файла:
```
"Name","Email","Age","Location","Country"
"John Doe","john@example.com",30,"New York","US"
"Alice Smith","alice@example.com",25,"London","GB"
```

#### Примечания:
- Пожалуйста, предоставьте код в соответствии с принятными стандартами оформления и комментируйте ключевые моменты.
- Предполагается, что в системе уже существует модель `Customer` для сохранения данных о клиентах в базе данных.
- Необходимо убедиться, что код проходит базовые тесты и возвращает ожидаемые результаты в соответствии с требованиями.

## Установка

1. Установка пакетов php
```
composer install
```
2. Ключ приложения
```
php artisan key:generate
```
3. Настройте файл .env
```
   DB_CONNECTION=mysql  
   DB_HOST=localhost  
   DB_PORT=3306  
   DB_DATABASE=your_database
   DB_USERNAME=your_login  
   DB_PASSWORD=your_password
```
4. Загрузка таблиц
```
php artisan migrate
```
5. Подготовка файла random.csv
```
Переместите файл random.csv в папку /storage/app
```
6. Запуск тестовой команды
```
php artisan makeMove
```
7. Отчет с ошибками можно найти по адресу:
```
/storage/app/failed.xlsx
```
